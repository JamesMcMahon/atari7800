TABLEDRIVER:
	STAI	$80,TEMP0
	LDY	#49
	LDA	#(WIDTHTAB & $FF00)/256
	STA	WIDTH+1
	LDA	FRMCNT
	AND	#$3F
	BNE	.SSS
	INC	HILLOFF
	LDA	$1F
	AND	HILLOFF	
	STA	HILLOFF

.SSS:	LDX	HILLOFF
	LDA	X,HILLTAB
	CLC
;	ADC	#WIDTHTAB & $FF
	LDA	#(WIDTHTAB & $FF)+19	;5
	STA	WIDTH
.LLOOP:	LDA	@ROADSTART(Y)
	CLC
	ADC	@PERSPECTIVE(Y)
	TAX
	BIT	TEMP0
	
	BEQ	.OOOK
	LDA	#0	;DEH
.OOOK:	
	STA	Y,STARTS
	TXA
;	CLC
	ADC	@WIDTH(Y)
;	ADC	Y,WIDTHTAB+15
	BIT	TEMP0
	BEQ	.tok
	LDA	#0
	JMP	.OOK
.tok:	CMP	#40
	BCC	.OOK
	LDA	#40
;	CLC
.OOK:	
	STA	Y,ENDS
	DEY
	DEY
;	CPY	#25
	BPL	.LLOOP
	RTS
TABLEDRIVER1:
	STAI	$80,TEMP0
	LDY	#48
	LDA	#(WIDTHTAB & $FF00)/256
	STA	WIDTH+1

	LDA	$1F
	AND	HILLOFF	
	TAX
	LDA	X,HILLTAB
	CLC
;	ADC	#WIDTHTAB & $FF
	lda	#(WIDTHTAB & $FF)+19
	STA	WIDTH

.LLOOP:	LDA	@ROADSTART(Y)
	CLC
	ADC	@PERSPECTIVE(Y)
	TAX
	BIT	TEMP0
	
	BEQ	.OOOK
	LDA	#0	;DEH
.OOOK:	
	STA	Y,STARTS
	TXA
;	CLC
	ADC	@WIDTH(Y)
;	ADC	Y,WIDTHTAB+15
	BIT	TEMP0
	BEQ	.tok
	LDA	#0
	JMP	.OOK
.tok:	CMP	#40
	BCC	.OOK
	LDA	#40
;	CLC
.OOK:	
	STA	Y,ENDS
	DEY
	DEY
	BPL	.LLOOP
	RTS
HILLTAB:	
	.DC.B	0
	.DC.B	1
	.DC.B	2
	.DC.B	3
	.DC.B	4
	.DC.B	5
	.DC.B	6
	.DC.B	7
	.DC.B	8
	.DC.B	9
	.DC.B	10
	.DC.B	11
	.DC.B	12
	.DC.B	13
	.DC.B	14
	.DC.B	15
	.DC.B	14
	.DC.B	13
	.DC.B	12
	.DC.B	11
	.DC.B	10
	.DC.B	9
	.DC.B	8
	.DC.B	7
	.DC.B	6
	.DC.B	5
	.DC.B	4
	.DC.B	3
	.DC.B	2
	.DC.B	1
	.DC.B	0
	.DC.B	0
